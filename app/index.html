<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Set App</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />
    <link href="app-content/app.css" rel="stylesheet" />
</head>
<body class="container">
    <!-- header -->
    <header>
        <ul class="nav nav-tabs">
            <!--Got the logout to work after logging out user will be taken to the login page-->
            <li ng-class="{active: activeTab === 'home'}"><a ui-sref="home">Home</a></li>
            <li ng-class="{active: activeTab === 'account'}"><a ui-sref="account" id = "account">Account</a></li>
            <li ng-class="{active: activeTab === 'viewSets'}"><a ui-sref="viewSets" id = "viewSets">View Sets</a></li>
             <!-- Hidden tabs to normal users -->
            <li ng-class="{active: activeTab === 'imageDB'}"><a ui-sref="imageDB" id = "imageDB" style="visibility: hidden">Image Database</a></li>
            <li ng-class="{active: activeTab === 'createSets'}" ><a ui-sref="createSets" id = "createSets" style="visibility: hidden">Create Sets</a></li>
            <li ng-class="{active: activeTab === 'editSets'}"><a ui-sref="editSets" id = "editSets" style="visibility: hidden">Edit Sets</a></li>
            <li ng-class="{active: activeTab === 'deleteSets'}"><a ui-sref="deleteSets" id = "deleteSets" style="visibility: hidden">Delete Sets</a></li>
            <li ng-class="{active: activeTab === 'userCreator'}"><a ui-sref="userCreator" id = "userCreator" style="visibility: hidden">Create Users</a></li>
            <li ng-class="{active: activeTab === 'userDelete'}"><a ui-sref="userDelete" id = "userDelete" style="visibility: hidden">Delete Users</a></li>
            <!-- ^^^^Hidden tabs to normal users^^^^ -->
            <li><a href="/login" target="_self">Logout</a></li>
        </ul>
        <div class="flash-message" ng-if="flash">
            <div class="{{'alert alert-' + flash.type}}" ng-bind="flash.message"></div>
        </div>
    </header>

    <div ng-controller="App.Controller as vm">
        <input type="hidden" id="myValueFromController" value="{{vm.user.level}}" />
    </div>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
        /// make other tabs visible to admins only
        setTimeout(function(){
            var data = document.getElementById("myValueFromController").value;
            if (data == 'admin') {
                document.getElementById('imageDB').style.visibility = "visible";
                document.getElementById('createSets').style.visibility = "visible";
                document.getElementById('editSets').style.visibility = "visible";
                document.getElementById('deleteSets').style.visibility = "visible";
                document.getElementById('userCreator').style.visibility = "visible";
                document.getElementById('userDelete').style.visibility = "visible";
            }
        }, 500);
    </script>

    <!-- main -->
    <main ui-view></main>

    <!-- footer -->
    <footer></footer>

    <!-- external scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>

    <!-- application scripts -->
    <script src="app.js"></script>
    <script src="app-services/user.service.js"></script>
    <script src="app-services/flash.service.js"></script>
    <script src="home/index.controller.js"></script>
    <script src="account/index.controller.js"></script>
    <!-- imageDB controller -->
    <script src="imageDB/index.controller.js"></script>
    <script src="sets/viewSets/index.controller.js"></script>
    <script src="sets/createSets/index.controller.js"></script>
    <script src="sets/editSets/index.controller.js"></script>
    <script src="sets/deleteSets/index.controller.js"></script>
    <script src="controllers/register.controller.js"></script>
    <script src="user-delete/index.controller.js"></script>
</body>
</html>
